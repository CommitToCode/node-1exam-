<%- include('../partials/header') %>

<h2>Categories</h2>

<% if (typeof messages !== 'undefined' && messages.success) { %>
  <div class="alert alert-success"><%= messages.success %></div>
<% } %>

<a href="/admin/categories/add" class="btn btn-primary mb-3">Add New</a>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>Name</th>
      <th>Slug</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% if (Array.isArray(categories) && categories.length > 0) { %>
      <% categories.forEach(cat => { %>
        <tr>
          <td><%= cat.name %></td>
          <td><%= cat.slug %></td>
          <td>
            <a href="/admin/categories/edit/<%= cat._id %>" class="btn btn-warning btn-sm">Edit</a>
  <form action="/admin/categories/delete/<%= cat._id %>" method="POST" style="display:inline;">
    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
  </form>

          </td>
        </tr>
      <% }) %>
    <% } else { %>
      <tr>
        <td colspan="3" class="text-center text-muted">No categories found.</td>
      </tr>
    <% } %>
  </tbody>
</table>

<%- include('../partials/footer') %>
